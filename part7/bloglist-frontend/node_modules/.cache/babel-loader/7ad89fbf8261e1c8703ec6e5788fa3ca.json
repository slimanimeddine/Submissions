{"ast":null,"code":"import { createSlice, createAsyncThunk, createEntityAdapter } from '@reduxjs/toolkit';\nimport axios from 'axios';\nconst blogsAdapter = createEntityAdapter({\n  sortComparer: (a, b) => a.likes - b.likes\n});\nconst initialState = blogsAdapter.getInitialState({\n  status: 'idle',\n  error: null\n});\nexport const fetchBlogs = createAsyncThunk('blogs/fetchBlogs', async () => {\n  const response = await axios.get('/api/blogs');\n  return response.data;\n});\nexport const addNewPost = createAsyncThunk('blogs/addNewBlog', async initialPost => {\n  const response = await axios.post('/api/blogs', initialPost);\n  return response.data;\n});\nconst blogsSlice = createSlice({\n  name: 'blogs',\n  initialState,\n  reducers: {\n    likesIncremented(state, action) {\n      const {\n        blogId\n      } = action.payload;\n      const existingBlog = state.entities[blogId];\n\n      if (existingBlog) {\n        existingBlog.likes++;\n      }\n    }\n\n  },\n\n  extraReducers(builder) {\n    builder.addCase(fetchBlogs.pending, (state, action) => {\n      state.status = 'loading';\n    }).addCase(fetchBlogs.fulfilled, (state, action) => {\n      state.status = 'succeeded';\n      blogsAdapter.upsertMany(state, action.payload);\n    }).addCase(fetchBlogs.rejected, (state, action) => {\n      state.status = 'failed';\n      state.error = action.error.message;\n    });\n  }\n\n});\nexport const {\n  likesIncremented\n} = blogsSlice.actions;\nexport default postsSlice.reducer;\nexport const {\n  selectAll: selectAllBlogs,\n  selectById: selectBlogById,\n  selectIds: selectBlogIds\n} = blogsAdapter.getSelectors(state => state.blogs);","map":{"version":3,"sources":["/home/slimanimeddine/devstuff/Submissions/part7/bloglist-frontend/src/slices/blogsSlice.js"],"names":["createSlice","createAsyncThunk","createEntityAdapter","axios","blogsAdapter","sortComparer","a","b","likes","initialState","getInitialState","status","error","fetchBlogs","response","get","data","addNewPost","initialPost","post","blogsSlice","name","reducers","likesIncremented","state","action","blogId","payload","existingBlog","entities","extraReducers","builder","addCase","pending","fulfilled","upsertMany","rejected","message","actions","postsSlice","reducer","selectAll","selectAllBlogs","selectById","selectBlogById","selectIds","selectBlogIds","getSelectors","blogs"],"mappings":"AAAA,SACIA,WADJ,EAEIC,gBAFJ,EAGIC,mBAHJ,QAIO,kBAJP;AAMA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,MAAMC,YAAY,GAAGF,mBAAmB,CAAC;AACrCG,EAAAA,YAAY,EAAE,CAACC,CAAD,EAAIC,CAAJ,KAAUD,CAAC,CAACE,KAAF,GAAUD,CAAC,CAACC;AADC,CAAD,CAAxC;AAIA,MAAMC,YAAY,GAAGL,YAAY,CAACM,eAAb,CAA6B;AAC9CC,EAAAA,MAAM,EAAE,MADsC;AAE9CC,EAAAA,KAAK,EAAE;AAFuC,CAA7B,CAArB;AAKA,OAAO,MAAMC,UAAU,GAAGZ,gBAAgB,CAAC,kBAAD,EAAqB,YAAY;AACvE,QAAMa,QAAQ,GAAG,MAAMX,KAAK,CAACY,GAAN,CAAU,YAAV,CAAvB;AACA,SAAOD,QAAQ,CAACE,IAAhB;AACH,CAHyC,CAAnC;AAKP,OAAO,MAAMC,UAAU,GAAGhB,gBAAgB,CAAC,kBAAD,EAAqB,MAAMiB,WAAN,IAAqB;AAChF,QAAMJ,QAAQ,GAAG,MAAMX,KAAK,CAACgB,IAAN,CAAW,YAAX,EAAyBD,WAAzB,CAAvB;AACA,SAAOJ,QAAQ,CAACE,IAAhB;AACH,CAHyC,CAAnC;AAKP,MAAMI,UAAU,GAAGpB,WAAW,CAAC;AAC3BqB,EAAAA,IAAI,EAAE,OADqB;AAE3BZ,EAAAA,YAF2B;AAG3Ba,EAAAA,QAAQ,EAAE;AACNC,IAAAA,gBAAgB,CAAEC,KAAF,EAASC,MAAT,EAAiB;AAC7B,YAAM;AAAEC,QAAAA;AAAF,UAAaD,MAAM,CAACE,OAA1B;AACA,YAAMC,YAAY,GAAGJ,KAAK,CAACK,QAAN,CAAeH,MAAf,CAArB;;AACA,UAAIE,YAAJ,EAAkB;AACdA,QAAAA,YAAY,CAACpB,KAAb;AACH;AACJ;;AAPK,GAHiB;;AAY3BsB,EAAAA,aAAa,CAAEC,OAAF,EAAW;AACpBA,IAAAA,OAAO,CACFC,OADL,CACanB,UAAU,CAACoB,OADxB,EACiC,CAACT,KAAD,EAAQC,MAAR,KAAmB;AAC5CD,MAAAA,KAAK,CAACb,MAAN,GAAe,SAAf;AACH,KAHL,EAIKqB,OAJL,CAIanB,UAAU,CAACqB,SAJxB,EAImC,CAACV,KAAD,EAAQC,MAAR,KAAmB;AAC9CD,MAAAA,KAAK,CAACb,MAAN,GAAe,WAAf;AACAP,MAAAA,YAAY,CAAC+B,UAAb,CAAwBX,KAAxB,EAA+BC,MAAM,CAACE,OAAtC;AACH,KAPL,EAQKK,OARL,CAQanB,UAAU,CAACuB,QARxB,EAQkC,CAACZ,KAAD,EAAQC,MAAR,KAAmB;AAC7CD,MAAAA,KAAK,CAACb,MAAN,GAAe,QAAf;AACAa,MAAAA,KAAK,CAACZ,KAAN,GAAca,MAAM,CAACb,KAAP,CAAayB,OAA3B;AACH,KAXL;AAYH;;AAzB0B,CAAD,CAA9B;AA4BA,OAAO,MAAM;AAAEd,EAAAA;AAAF,IAAuBH,UAAU,CAACkB,OAAxC;AAEP,eAAeC,UAAU,CAACC,OAA1B;AAEA,OAAO,MAAM;AACTC,EAAAA,SAAS,EAAEC,cADF;AAETC,EAAAA,UAAU,EAAEC,cAFH;AAGTC,EAAAA,SAAS,EAAEC;AAHF,IAIT1C,YAAY,CAAC2C,YAAb,CAA0BvB,KAAK,IAAIA,KAAK,CAACwB,KAAzC,CAJG","sourcesContent":["import {\n    createSlice,\n    createAsyncThunk,\n    createEntityAdapter\n} from '@reduxjs/toolkit'\n\nimport axios from 'axios'\n\nconst blogsAdapter = createEntityAdapter({\n    sortComparer: (a, b) => a.likes - b.likes\n})\n\nconst initialState = blogsAdapter.getInitialState({\n    status: 'idle',\n    error: null\n})\n\nexport const fetchBlogs = createAsyncThunk('blogs/fetchBlogs', async () => {\n    const response = await axios.get('/api/blogs')\n    return response.data\n})\n\nexport const addNewPost = createAsyncThunk('blogs/addNewBlog', async initialPost => {\n    const response = await axios.post('/api/blogs', initialPost)\n    return response.data\n})\n\nconst blogsSlice = createSlice({\n    name: 'blogs',\n    initialState,\n    reducers: {\n        likesIncremented (state, action) {\n            const { blogId } = action.payload\n            const existingBlog = state.entities[blogId]\n            if (existingBlog) {\n                existingBlog.likes++\n            }\n        }\n    },\n    extraReducers (builder) {\n        builder\n            .addCase(fetchBlogs.pending, (state, action) => {\n                state.status = 'loading'\n            })\n            .addCase(fetchBlogs.fulfilled, (state, action) => {\n                state.status = 'succeeded'\n                blogsAdapter.upsertMany(state, action.payload)\n            })\n            .addCase(fetchBlogs.rejected, (state, action) => {\n                state.status = 'failed'\n                state.error = action.error.message\n            })\n    }\n})\n\nexport const { likesIncremented } = blogsSlice.actions\n\nexport default postsSlice.reducer\n\nexport const {\n    selectAll: selectAllBlogs,\n    selectById: selectBlogById,\n    selectIds: selectBlogIds\n} = blogsAdapter.getSelectors(state => state.blogs)"]},"metadata":{},"sourceType":"module"}